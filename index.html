<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Manejo Café</title>
  <!-- FontAwesome Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Firebase Compat -->
  <script src="https://www.gstatic.com/firebasejs/9.18.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.18.0/firebase-firestore-compat.js"></script>
  <style>
    body { margin:0; background: #222; color: #fff; font-family: Arial, sans-serif; }
    /* Top menu */
    #navbar { background: #555; display: flex; justify-content: space-around; align-items: center; position: fixed; top: 0; width: 100%; height: 50px; z-index: 1000; }
    #navbar li { list-style: none; position: relative; }
    #navbar li i { font-size: 20px; color: #fff; }
    #navbar li .badge { position: absolute; top: 2px; right: 6px; background: red; color: #fff; padding: 1px 6px; border-radius: 12px; font-size: 12px; }
    #navbar li:hover { background: #666; cursor: pointer; }
    /* Content sections */
    .tab { display: none; padding: 60px 20px 20px 20px; }
    .tab.active { display: block; }
    /* Financeiro styling */
    #dueAccounts ul, #paidAccounts ul { list-style: none; padding: 0; }
    #dueAccounts li, #paidAccounts li { margin: 8px 0; }
    .btn-pagar, .btn-excluir { border: none; color: #fff; padding: 4px 8px; font-size: 12px; margin-left: 8px; cursor: pointer; }
    .btn-pagar { background: #4CAF50; }
    .btn-excluir { background: #f44336; }
    /* Exemplo: campos compactos alinhados com botão Salvar */
    .new-account-form input, .new-account-form button { padding: 6px; margin: 4px 2px; font-size: 14px; }
    .new-account-form { display: flex; align-items: center; flex-wrap: wrap; }
    .new-account-form input { margin-right: 4px; }
    .new-account-form button { background: #4CAF50; color: #fff; border: none; }
    /* Chart canvas */
    #reportChart { max-width: 600px; }
  </style>
</head>
<body>
  <!-- Menu Superior -->
  <ul id="navbar">
    <li id="nav-home"><i class="fas fa-home"></i></li>
    <li id="nav-finance"><i class="fas fa-dollar-sign"></i><span id="finance-badge" class="badge" style="display:none;"></span></li>
    <li id="nav-apps"><i class="fas fa-th-large"></i></li>
    <li id="nav-tasks"><i class="fas fa-tasks"></i></li>
    <li id="nav-report"><i class="fas fa-chart-line"></i></li>
    <li id="nav-settings"><i class="fas fa-cog"></i></li>
  </ul>

  <!-- Páginas de Conteúdo -->
  <div id="home" class="tab active">
    <h2>Bem-vindo ao Manejo Café</h2>
    <p>Página inicial ou dashboard (sem alterações solicitadas).</p>
  </div>

  <div id="finance" class="tab">
    <h2>Financeiro</h2>
    <!-- Formulário de exemplo para nova conta -->
    <div class="new-account-form">
      <input type="text" id="descInput" placeholder="Descrição">
      <input type="number" id="valorInput" placeholder="Valor">
      <input type="date" id="vencInput" placeholder="Vencimento">
      <button id="addAccountBtn">Salvar</button>
    </div>
    <h3>Contas a Pagar</h3>
    <div id="dueAccounts"></div>
    <h3>Contas Pagas</h3>
    <div id="paidAccounts"></div>
  </div>

  <div id="apps" class="tab">
    <h2>Aplicações</h2>
    <p>Conteúdo da aba Aplicações (sem alterações solicitadas).</p>
  </div>

  <div id="tasks" class="tab">
    <h2>Tarefas</h2>
    <p>Conteúdo da aba Tarefas (sem alterações solicitadas).</p>
  </div>

  <div id="report" class="tab">
    <h2>Relatório</h2>
    <canvas id="reportChart"></canvas>
  </div>

  <div id="settings" class="tab">
    <h2>Configurações</h2>
    <p>Conteúdo da aba Configurações (sem alterações solicitadas).</p>
  </div>

  <script>
    // Inicialização Firebase (adicione suas credenciais)
    var firebaseConfig = {
      apiKey: "SUA_API_KEY",
      authDomain: "SEU_DOMINIO.firebaseapp.com",
      projectId: "SEU_PROJECT_ID",
      // ... demais configurações ...
    };
    firebase.initializeApp(firebaseConfig);
    var db = firebase.firestore();

    // Navegação entre abas
    function showTab(tabId) {
      document.querySelectorAll('.tab').forEach(tab => {
        tab.classList.remove('active');
      });
      document.getElementById(tabId).classList.add('active');
    }
    document.getElementById('nav-home').addEventListener('click', () => showTab('home'));
    document.getElementById('nav-finance').addEventListener('click', () => showTab('finance'));
    document.getElementById('nav-apps').addEventListener('click', () => showTab('apps'));
    document.getElementById('nav-tasks').addEventListener('click', () => showTab('tasks'));
    document.getElementById('nav-report').addEventListener('click', () => showTab('report'));
    document.getElementById('nav-settings').addEventListener('click', () => showTab('settings'));

    // Exemplo de dados (substituir por dados do Firebase)
    let contas = [
      { descricao: "Conta de Luz", valor: 120.50, vencimento: "2025-05-10", pago: false },
      { descricao: "Água", valor: 80.00, vencimento: "2025-05-10", pago: false },
      { descricao: "Internet", valor: 100.00, vencimento: "2025-06-01", pago: false }
    ];

    function renderAccounts() {
      const dueDiv = document.getElementById("dueAccounts");
      const paidDiv = document.getElementById("paidAccounts");
      dueDiv.innerHTML = "";
      paidDiv.innerHTML = "";

      // Agrupar contas não pagas por data de vencimento
      let grouped = {};
      contas.forEach((conta, index) => {
        if (!conta.pago) {
          if (!grouped[conta.vencimento]) {
            grouped[conta.vencimento] = [];
          }
          grouped[conta.vencimento].push({ ...conta, index });
        }
      });
      // Exibir contas agrupadas
      for (let date in grouped) {
        let dateObj = new Date(date);
        let dateStr = dateObj.toLocaleDateString("pt-BR");
        dueDiv.innerHTML += `<h4>${dateStr}</h4><ul>`;
        grouped[date].forEach(item => {
          dueDiv.innerHTML += `
            <li>
              ${item.descricao} - R$ ${item.valor.toFixed(2)}
              <button class="btn-pagar" onclick="payAccount(${item.index})">Pagar</button>
              <button class="btn-excluir" onclick="deleteAccount(${item.index})">Excluir</button>
            </li>`;
        });
        dueDiv.innerHTML += `</ul>`;
      }
      // Exibir contas pagas
      const paidList = contas.filter(c => c.pago);
      if (paidList.length > 0) {
        paidDiv.innerHTML += `<ul>`;
        paidList.forEach(item => {
          paidDiv.innerHTML += `
            <li>${item.descricao} - R$ ${item.valor.toFixed(2)}</li>`;
        });
        paidDiv.innerHTML += `</ul>`;
      }

      updateBadge();
    }

    function payAccount(index) {
      contas[index].pago = true;
      renderAccounts();
    }

    function deleteAccount(index) {
      // Remove a conta da lista
      contas.splice(index, 1);
      renderAccounts();
    }

    function updateBadge() {
      const count = contas.filter(c => !c.pago).length;
      const badge = document.getElementById("finance-badge");
      if (count > 0) { badge.textContent = count; badge.style.display = "inline"; } else { badge.style.display = "none"; }
    }

    // Botão para adicionar nova conta (exemplo de formulário)
    document.getElementById('addAccountBtn').addEventListener('click', () => {
      const desc = document.getElementById('descInput').value;
      const valor = parseFloat(document.getElementById('valorInput').value);
      const venc = document.getElementById('vencInput').value;
      if (desc && valor && venc) {
        contas.push({ descricao: desc, valor: valor, vencimento: venc, pago: false });
        renderAccounts();
      }
    });

    // Inicializa visualização
    window.onload = function() {
      renderAccounts();

      // Configuração de exemplo do Chart.js (Relatório)
      const ctx = document.getElementById('reportChart').getContext('2d');
      const reportChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun'],
          datasets: [{
            label: 'Exemplo de Receita',
            data: [1200, 1500, 1800, 1700, 1600, 2000],
            backgroundColor: '#4CAF50'
          }]
        },
        options: {
          scales: {
            y: { beginAtZero: true }
          }
        }
      });
    };
  </script>
</body>
</html>
