<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Manejo Café</title>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

  <!-- FontAwesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet" />

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- jsPDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <!-- Estilos -->
  <link rel="stylesheet" href="cc/style.css" />

  <!-- Scripts -->
  <script defer src="js/firebase-config.js"></script>
  <script defer src="js/main.js"></script>
</head>
<body>
  <div class="menu-superior">
    <button id="btn-aplicacoes" onclick="carregarAba('aplicacao.html')"><i class="fas fa-flask"></i></button>
    <button id="btn-tarefas" onclick="carregarAba('tarefas.html')"><i class="fas fa-tasks"></i></button>
    <button id="btn-financeiro" onclick="carregarAba('financeiro.html')"><i class="fas fa-dollar-sign"></i></button>
    <button id="btn-colheita" onclick="carregarAba('colheita.html')"><i class="fas fa-tractor"></i></button>
    <button id="btn-relatorio" onclick="carregarAba('relatorio.html')"><i class="fas fa-chart-line"></i></button>
    <button id="btn-configuracoes" onclick="carregarAba('configuracoes.html')"><i class="fas fa-cog"></i></button>
  </div>

  <div class="conteudo" id="conteudoPrincipal">
    <h2>Bem-vindo ao Manejo Café</h2>
    <p>Escolha uma das opções acima para iniciar.</p>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const abaInicial = localStorage.getItem('aba') || 'aplicacao.html';
      carregarAba(abaInicial);
    });

    function carregarAba(arquivo) {
      fetch(arquivo)
        .then(response => response.text())
        .then(html => {
          document.getElementById('conteudoPrincipal').innerHTML = html;
          carregarScripts(arquivo);
        })
        .catch(error => console.error("Erro ao carregar a aba:", error));
      
      localStorage.setItem('aba', arquivo);
    }

    function carregarScripts(arquivo) {
      // Remover scripts antigos
      document.querySelectorAll('script[data-aba]').forEach(script => script.remove());

      let script = document.createElement('script');
      script.setAttribute('data-aba', 'true');

      switch (arquivo) {
        case 'aplicacao.html':
          script.src = "js/aplicacao.js";
          break;
        case 'tarefas.html':
          script.src = "js/tarefas.js";
          break;
        case 'financeiro.html':
          script.src = "js/financeiro.js";
          break;
        case 'colheita.html':
          script.src = "js/colheita.js";
          break;
        case 'relatorio.html':
          script.src = "js/relatorio.js";
          break;
        case 'configuracoes.html':
          script.src = "js/configuracoes.js";
          break;
      }

      document.body.appendChild(script);
    }
  </script>
</body>
</html>
