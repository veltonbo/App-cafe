<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Manejo Café Pro</title>
  
  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

  <!-- FontAwesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">

  <!-- Chart.js e jsPDF & jsPDF-AutoTable -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.1/jspdf.plugin.autotable.min.js"></script>

  <!-- Estilos -->
  <link rel="stylesheet" href="style.css">

  <!-- Scripts -->
  <script defer src="js/firebase-config.js"></script>
  <script defer src="js/main.js"></script>
  <script defer src="js/aplicacao.js"></script>
  <script defer src="js/tarefas.js"></script>
  <script defer src="js/financeiro.js"></script>
  <script defer src="js/colheita.js"></script>
  <script defer src="js/relatorio.js"></script>
  <script defer src="js/configuracoes.js"></script>
</head>
<body>
  <!-- ===== MENU SUPERIOR ===== -->
  <nav class="menu-superior" aria-label="Menu principal">
    <button data-aba="aplicacoes" aria-label="Aplicações" title="Aplicações"><i class="fas fa-flask"></i></button>
    <button data-aba="tarefas" aria-label="Tarefas" title="Tarefas"><i class="fas fa-tasks"></i></button>
    <button data-aba="financeiro" aria-label="Financeiro" title="Financeiro"><i class="fas fa-dollar-sign"></i></button>
    <button data-aba="colheita" aria-label="Colheita" title="Colheita"><i class="fas fa-tractor"></i></button>
    <button data-aba="relatorio" aria-label="Relatório" title="Relatório"><i class="fas fa-chart-line"></i></button>
    <button data-aba="configuracoes" aria-label="Configurações" title="Configurações"><i class="fas fa-cog"></i></button>
  </nav>

  <main class="conteudo">
    <!-- ===== APLICAÇÕES ===== -->
    <section id="aba-aplicacoes" class="aba" aria-labelledby="titulo-aplicacoes">
      <h2 id="titulo-aplicacoes"><i class="fas fa-flask"></i> Aplicações</h2>
      <button id="btnAdicionarAplicacao" class="botao-flutuante" aria-label="Adicionar Aplicação" style="display:none;">
        <i class="fas fa-plus"></i>
      </button>
      <form id="formAplicacao" class="hidden" autocomplete="off">
        <input type="hidden" id="aplicacaoIdEdit">
        <label for="dataApp">Data:</label>
        <input id="dataApp" type="date" required>
        <label for="produtoApp">Produto:</label>
        <div class="input-group">
          <input id="produtoApp" list="sugestoesProdutoApp" required>
          <datalist id="sugestoesProdutoApp"></datalist>
          <button type="button" id="btnEditarAplicacao" class="btn-editar hidden" title="Editar"><i class="fas fa-edit"></i></button>
          <button type="button" id="btnDeletarAplicacao" class="btn-deletar hidden" title="Deletar"><i class="fas fa-trash"></i></button>
        </div>
        <label for="dosagemApp">Dosagem:</label>
        <input id="dosagemApp" required>
        <label for="tipoApp">Tipo:</label>
        <select id="tipoApp">
          <option value="Adubo">Adubo</option>
          <option value="Fungicida">Fungicida</option>
          <option value="Inseticida">Inseticida</option>
          <option value="Herbicida">Herbicida</option>
          <option value="Outro">Outro</option>
        </select>
        <label for="setorApp">Setor/Talhão:</label>
        <input id="setorApp" list="sugestoesSetor">
        <datalist id="sugestoesSetor"></datalist>
        <div class="form-actions">
          <button type="submit" id="btnSalvarAplicacao" class="btn-primary">Salvar Aplicação</button>
          <button type="button" id="btnCancelarEdicaoApp" class="btn-secondary hidden">Cancelar</button>
        </div>
      </form>
      <input type="text" id="filtroAplicacoes" class="filtro-lista" placeholder="Filtrar aplicações...">
      <div id="listaAplicacoes"></div>
    </section>

    <!-- ===== TAREFAS ===== -->
    <section id="aba-tarefas" class="aba" aria-labelledby="titulo-tarefas">
      <h2 id="titulo-tarefas"><i class="fas fa-tasks"></i> Tarefas</h2>
      <button id="btnAdicionarTarefa" class="botao-flutuante" aria-label="Adicionar Tarefa" style="display:none;">
        <i class="fas fa-plus"></i>
      </button>
      <form id="formTarefa" class="hidden" autocomplete="off">
        <input type="hidden" id="tarefaIdEdit">
        <label for="dataTarefa">Data:</label>
        <input id="dataTarefa" type="date" required>
        <label for="descricaoTarefa">Descrição:</label>
        <div class="input-group">
          <input id="descricaoTarefa" required>
          <button type="button" id="btnEditarTarefa" class="btn-editar hidden" title="Editar"><i class="fas fa-edit"></i></button>
          <button type="button" id="btnDeletarTarefa" class="btn-deletar hidden" title="Deletar"><i class="fas fa-trash"></i></button>
        </div>
        <label for="prioridadeTarefa">Prioridade:</label>
        <select id="prioridadeTarefa">
          <option value="Alta">Alta</option>
          <option value="Média" selected>Média</option>
          <option value="Baixa">Baixa</option>
        </select>
        <label for="setorTarefa">Setor/Talhão:</label>
        <input id="setorTarefa" list="sugestoesSetor">
        <div>
          <input type="checkbox" id="eAplicacaoTarefaCheckbox">
          <label for="eAplicacaoTarefaCheckbox">É uma Aplicação?</label>
        </div>
        <div id="camposAplicacaoTarefa" class="hidden">
          <label for="produtoAplicacaoTarefa">Produto:</label>
          <input id="produtoAplicacaoTarefa" list="sugestoesProdutoApp">
          <label for="dosagemAplicacaoTarefa">Dosagem:</label>
          <input id="dosagemAplicacaoTarefa">
          <label for="tipoAplicacaoTarefa">Tipo:</label>
          <select id="tipoAplicacaoTarefa">
            <option value="Adubo">Adubo</option>
            <option value="Fungicida">Fungicida</option>
            <option value="Inseticida">Inseticida</option>
            <option value="Herbicida">Herbicida</option>
            <option value="Outro">Outro</option>
          </select>
        </div>
        <div class="form-actions">
          <button type="submit" id="btnSalvarTarefa" class="btn-primary">Salvar Tarefa</button>
          <button type="button" id="btnCancelarEdicaoTarefa" class="btn-secondary hidden">Cancelar</button>
        </div>
      </form>
      <input type="text" id="filtroTarefasPendentes" class="filtro-lista" placeholder="Filtrar tarefas pendentes...">
      <div id="listaTarefasPendentes"></div>
      <input type="text" id="filtroTarefasConcluidas" class="filtro-lista" placeholder="Filtrar tarefas concluídas...">
      <div id="listaTarefasConcluidas"></div>
    </section>

    <!-- ===== FINANCEIRO ===== -->
    <section id="aba-financeiro" class="aba" aria-labelledby="titulo-financeiro">
      <h2 id="titulo-financeiro"><i class="fas fa-dollar-sign"></i> Financeiro</h2>
      <button id="btnAdicionarFinanceiro" class="botao-flutuante" aria-label="Adicionar Lançamento" style="display:none;">
        <i class="fas fa-plus"></i>
      </button>
      <form id="formFinanceiro" class="hidden" autocomplete="off">
        <input type="hidden" id="financeiroIdEdit">
        <label for="tipoLancamentoFin">Tipo:</label>
        <select id="tipoLancamentoFin">
          <option value="gasto" selected>Gasto</option>
          <option value="receita">Receita</option>
        </select>
        <label for="dataFin">Data:</label>
        <input id="dataFin" type="date" required>
        <label for="descricaoFin">Descrição:</label>
        <div class="input-group">
          <input id="descricaoFin" required>
          <button type="button" id="btnEditarFinanceiro" class="btn-editar hidden" title="Editar"><i class="fas fa-edit"></i></button>
          <button type="button" id="btnDeletarFinanceiro" class="btn-deletar hidden" title="Deletar"><i class="fas fa-trash"></i></button>
        </div>
        <label for="valorFin">Valor (R$):</label>
        <input id="valorFin" type="number" step="0.01" required>
        <label for="categoriaFin">Categoria:</label>
        <input id="categoriaFin" list="sugestoesCategoriaFin">
        <datalist id="sugestoesCategoriaFin">
          <option value="Insumos Agrícolas"></option>
          <option value="Mão de Obra"></option>
          <option value="Manutenção"></option>
          <option value="Combustível"></option>
          <option value="Venda de Café"></option>
          <option value="Outros Gastos"></option>
          <option value="Outras Receitas"></option>
        </datalist>
        <div>
          <input type="checkbox" id="parceladoFin">
          <label for="parceladoFin">Parcelado?</label>
        </div>
        <div id="camposParcelasFin" class="hidden">
          <label for="numParcelasFin">Número de Parcelas:</label>
          <input id="numParcelasFin" type="number" min="2">
        </div>
        <div class="form-actions">
          <button type="submit" id="btnSalvarFinanceiro" class="btn-primary">Salvar Lançamento</button>
          <button type="button" id="btnCancelarEdicaoFin" class="btn-secondary hidden">Cancelar</button>
        </div>
      </form>
      <div id="resumoFinanceiro"></div>
      <input type="text" id="filtroFinanceiro" class="filtro-lista" placeholder="Filtrar lançamentos...">
      <div id="listaFinanceiro"></div>
    </section>

    <!-- ===== COLHEITA ===== -->
    <section id="aba-colheita" class="aba" aria-labelledby="titulo-colheita">
      <h2 id="titulo-colheita"><i class="fas fa-tractor"></i> Colheita</h2>
      <button id="btnAdicionarColheita" class="botao-flutuante" aria-label="Adicionar Colheita" style="display:none;">
        <i class="fas fa-plus"></i>
      </button>
      <div>
        <label for="valorLataColheita">Valor da Lata (R$):</label>
        <input id="valorLataColheita" type="number" step="0.01">
        <button type="button" id="btnSalvarValorLata" class="btn-secondary">Salvar Valor</button>
      </div>
      <form id="formColheita" class="hidden" autocomplete="off">
        <input type="hidden" id="colheitaIdEdit">
        <label for="dataColheita">Data:</label>
        <input id="dataColheita" type="date" required>
        <label for="colhedorColheita">Colhedor:</label>
        <div class="input-group">
          <input id="colhedorColheita" list="sugestoesColhedor" required>
          <datalist id="sugestoesColhedor"></datalist>
          <button type="button" id="btnEditarColheita" class="btn-editar hidden" title="Editar"><i class="fas fa-edit"></i></button>
          <button type="button" id="btnDeletarColheita" class="btn-deletar hidden" title="Deletar"><i class="fas fa-trash"></i></button>
        </div>
        <label for="quantidadeLatasColheita">Quantidade de Latas:</label>
        <input id="quantidadeLatasColheita" type="number" step="0.5" required>
        <div>
          <input type="checkbox" id="pagoColheita" checked>
          <label for="pagoColheita">Pago na Data?</label>
        </div>
        <div class="form-actions">
          <button type="submit" id="btnSalvarColheita" class="btn-primary">Salvar Registro</button>
          <button type="button" id="btnCancelarEdicaoColheita" class="btn-secondary hidden">Cancelar</button>
        </div>
      </form>
      <div id="resumoColheita"></div>
      <input type="text" id="filtroColheitaPendentes" class="filtro-lista" placeholder="Filtrar pendentes...">
      <div id="listaColheitaPendentes"></div>
      <input type="text" id="filtroColheitaPagos" class="filtro-lista" placeholder="Filtrar pagos...">
      <div id="listaColheitaPagos"></div>
    </section>

    <!-- ===== RELATÓRIO ===== -->
    <section id="aba-relatorio" class="aba" aria-labelledby="titulo-relatorio">
      <h2 id="titulo-relatorio"><i class="fas fa-chart-line"></i> Relatório</h2>
      <div style="margin-bottom:12px;">
        <label for="periodoRelatorioInicio">De:</label>
        <input type="date" id="periodoRelatorioInicio">
        <label for="periodoRelatorioFim">Até:</label>
        <input type="date" id="periodoRelatorioFim">
        <button type="button" id="btnFiltrarPeriodoRelatorio" class="btn-secondary">Filtrar</button>
      </div>
      <button type="button" id="btnExportarPDF">Exportar PDF</button>
      <button type="button" id="btnExportarCSV">Exportar CSV</button>
      <div id="relatorioGraficos"></div>
    </section>

    <!-- ===== CONFIGURAÇÕES ===== -->
    <section id="aba-configuracoes" class="aba" aria-labelledby="titulo-configuracoes">
      <h2 id="titulo-configuracoes"><i class="fas fa-cog"></i> Configurações</h2>
      <button type="button" id="btnAlternarTema">Alternar Tema</button>
      <p>Ano Safra Atual: <span id="anoSafraAtual"></span></p>
      <button type="button" id="btnFazerBackup">Fazer Backup</button>
      <input type="file" id="arquivoBackup" style="display:none;">
      <label for="arquivoBackup" class="btn-secondary">Importar Backup</label>
    </section>
  </main>
</body>
</html>
